// NGN Chassis
// UI Components

// :: Forms

@if variable-exists(CHASSIS_DETAILER_INCLUDED) and $CHASSIS_DETAILER_INCLUDED {

  .chassis {

    form {
      > *:last-child,
      fieldset > *:last-child {
        margin-bottom: 0;
      }

      legend {
        font: {
          weight: $form-legend-font-weight;
          style: $form-legend-font-style;
          variant: $form-legend-font-variant;
        }

        text: {
          decoration: $form-legend-text-decoration;
          transform: $form-legend-text-transform;
        }
      }

      .field {
        @include block-layout-rules($has-padding: false);

        // input:not([type='checkbox']):not([type='radio']),
        // textarea {
        //   display: block;
        //   flex: 1 1 auto;
        //   width: 0;
        //   max-width: 100%;
        //   margin: 0 0 0 0;
        // }

        .input {
          display: flex;

          input:not([type='checkbox']):not([type='radio']),
          textarea {
            @include inline-layout-rules;

            flex: 1 1 auto;
            width: 0;
            max-width: 100%;
            margin-bottom: 0;

            &:last-child {
              margin-right: 0;
            }
          }

          .button {
            margin-bottom: 0;

            &:last-child {
              margin-right: 0;
            }
          }

          *:last-child {
            margin-right: 0;
          }
        }
      }

      .row {
        display: flex;
        flex-direction: column;

        @include block-layout-rules($has-padding: false);

        > *:last-child {
          margin-bottom: 0;
        }

        .group {
          @include block-layout-rules($has-padding: false);

          &:last-child {
            margin-bottom: 0;
          }

          .field {
            margin-bottom: 0;
          }
        }

        @if map-has-key($viewport-width-ranges, small) {
          @include above-viewport-width(small) {
            flex-direction: row;

            .field,
            .group {
              flex: 1 1 auto;
              margin: 0 1em;

              &:first-child {
                margin-left: 0;
              }

              &:last-child {
                margin-right: 0;
              }
            }

            .group {
              @include block-layout-rules($has-margin: false);
              padding: {
                top: 0;
                bottom: 0;
              }

              &:first-child {
                padding-left: 0;
              }

              &:last-child {
                padding-right: 0;
              }

              .field {
                margin: 0;
              }
            }
          }
        }

      }

    }

    label {
      display: block;
      cursor: pointer;
    }

    input:not([type='checkbox']):not([type='radio']),
    textarea {
      font: {
        family: $textfield-fonts;
        weight: $textfield-font-weight;
      }

      border: 0;
      outline: 0;

      @if $form-fields-rounded-corners {
        border-radius: $form-fields-border-radius;
      }

      @if $form-fields-inset {
        box-shadow:
          inset 0 0 0 1px $textfield-border-color,
          $form-fields-inset-box-shadow
        ;
      } @else {
        box-shadow: inset 0 0 0 1px $textfield-border-color;
      }

      &:focus {
        outline: 0;
        box-shadow: inset 0 0 0 1px $textfield-focus-ring-color;
      }
    }

    input:not([type='checkbox']):not([type='radio']) {
      @include inline-layout-rules;
    }

    textarea {
      @include inline-layout-rules($multi-line: true);

      resize: none;

    	/* Turn off scroll bars in IE unless needed */
    	overflow: auto;

      vertical-align: top;
    }

    input[type="checkbox"],
    input[type="radio"] {
      + label {
        display: inline-block;
      }
    }

    button {
    	@extend %button;

      font: {
        family: $textfield-fonts;
        weight: $textfield-font-weight;
      }
    }

    @if map-has-key($viewport-width-ranges, tiny) {
      @include max-viewport-width(tiny) {
        button {
          display: block;
          width: 100%;
        }
      }
    }

    /* This rule must be independent of other selectors */
    ::-webkit-file-upload-button {
    	padding: 0;
    	border: 0;
    	background: none;
    }

    /* Selects
    -----------------------------------------------*/

    select {

      &[multiple] {
        /* Move the label to the top */
      	vertical-align: top;
      }
    }

  }

}
